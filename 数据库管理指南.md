# æ•°æ®åº“ç®¡ç†æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ç®¡ç†é¡¹ç›®æ•°æ®åº“ï¼ŒåŒ…æ‹¬å¯¼å‡ºå¹²å‡€çŠ¶æ€å’Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚

## ğŸ§¹ å½“å‰æ•°æ®åº“çŠ¶æ€

æ•°æ®åº“å·²æ¸…ç†å®Œæ¯•ï¼Œå½“å‰çŠ¶æ€ï¼š
- âœ… ä¿ç•™äº†å®Œæ•´çš„æ•°æ®åº“ç»“æ„ï¼ˆ24ä¸ªè¡¨ï¼‰
- âœ… ä¿ç•™äº†4ä¸ªç®¡ç†å‘˜è´¦æˆ·
- âœ… ä¿ç•™äº†ç³»ç»Ÿé…ç½®æ•°æ®
- âŒ åˆ é™¤äº†æ‰€æœ‰ä¸šåŠ¡æ•°æ®ï¼ˆç”¨æˆ·ã€è®¢å•ã€æ‰“å¡è®°å½•ç­‰ï¼‰

### ä¿ç•™çš„ç®¡ç†å‘˜è´¦æˆ·

| ID | å§“å | æ‰‹æœºå· | å¯†ç  | çŠ¶æ€ |
|----|------|--------|------|------|
| 14 | è¶…çº§ç®¡ç†å‘˜2 | 13800000002 | admin123456 | æ¿€æ´» |
| 15 | è¶…çº§ç®¡ç†å‘˜3 | 13800000003 | admin123456 | æ¿€æ´» |
| 16 | è¶…çº§ç®¡ç†å‘˜4 | 13800000004 | admin123456 | æ¿€æ´» |
| 21 | è¶…çº§ç®¡ç†å‘˜1 | 13800000001 | admin123456 | æ¿€æ´» |

## ğŸ“ ç›¸å…³æ–‡ä»¶

### SQLæ–‡ä»¶
- `backend/sql/clean_database_with_admins.sql` - å¹²å‡€æ•°æ®åº“çš„å®Œæ•´å¯¼å‡ºæ–‡ä»¶

### è„šæœ¬æ–‡ä»¶
- `backend/server/export-clean-database.js` - å¯¼å‡ºå½“å‰æ•°æ®åº“çŠ¶æ€
- `backend/server/import-clean-database.js` - å¯¼å…¥å¹²å‡€æ•°æ®åº“çŠ¶æ€
- `restore-clean-database.bat` - Windowsä¸€é”®æ¢å¤è„šæœ¬

## ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰

1. åŒå‡»è¿è¡Œ `restore-clean-database.bat`
2. æŒ‰æç¤ºç¡®è®¤æ“ä½œ
3. ç­‰å¾…æ¢å¤å®Œæˆ

### æ–¹æ³•2ï¼šä½¿ç”¨Node.jsè„šæœ¬

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend/server

# æ¢å¤å¹²å‡€æ•°æ®åº“
node import-clean-database.js
```

### æ–¹æ³•3ï¼šä½¿ç”¨MySQLå‘½ä»¤è¡Œ

```bash
# ä½¿ç”¨MySQLå‘½ä»¤è¡Œå¯¼å…¥
mysql -u root -p author_center < backend/sql/clean_database_with_admins.sql
```

### æ–¹æ³•4ï¼šä½¿ç”¨æ•°æ®åº“ç®¡ç†å·¥å…·

1. æ‰“å¼€phpMyAdminã€Navicatç­‰æ•°æ®åº“ç®¡ç†å·¥å…·
2. é€‰æ‹© `author_center` æ•°æ®åº“
3. å¯¼å…¥ `backend/sql/clean_database_with_admins.sql` æ–‡ä»¶

## ğŸ”„ é‡æ–°å¯¼å‡ºå¹²å‡€çŠ¶æ€

å¦‚æœæ‚¨ä¿®æ”¹äº†ç³»ç»Ÿé…ç½®æˆ–ç®¡ç†å‘˜ä¿¡æ¯ï¼Œæƒ³è¦é‡æ–°å¯¼å‡ºå¹²å‡€çŠ¶æ€ï¼š

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend/server

# å¯¼å‡ºå½“å‰çŠ¶æ€
node export-clean-database.js
```

è¿™å°†æ›´æ–° `backend/sql/clean_database_with_admins.sql` æ–‡ä»¶ã€‚

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å¤‡ä»½**ï¼šæ¢å¤æ“ä½œä¼šæ¸…ç©ºæ‰€æœ‰ç°æœ‰æ•°æ®ï¼Œè¯·ç¡®ä¿é‡è¦æ•°æ®å·²å¤‡ä»½
2. **ç¯å¢ƒè¦æ±‚**ï¼šç¡®ä¿å·²å®‰è£…Node.jså’ŒMySQLï¼Œå¹¶æ­£ç¡®é…ç½®äº†`.env`æ–‡ä»¶
3. **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™æ‰§è¡ŒDDLå’ŒDMLæ“ä½œ
4. **æœåŠ¡åœæ­¢**ï¼šå»ºè®®åœ¨æ¢å¤æ•°æ®åº“å‰åœæ­¢åç«¯æœåŠ¡

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥`.env`æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®
   - ç¡®ä¿MySQLæœåŠ¡æ­£åœ¨è¿è¡Œ
   - éªŒè¯ç”¨æˆ·åå’Œå¯†ç 

2. **æƒé™é”™è¯¯**
   - ç¡®ä¿æ•°æ®åº“ç”¨æˆ·æœ‰CREATEã€DROPã€INSERTã€DELETEæƒé™
   - æ£€æŸ¥FOREIGN_KEY_CHECKSè®¾ç½®

3. **æ–‡ä»¶ä¸å­˜åœ¨**
   - ç¡®ä¿SQLæ–‡ä»¶è·¯å¾„æ­£ç¡®
   - é‡æ–°è¿è¡Œå¯¼å‡ºè„šæœ¬ç”ŸæˆSQLæ–‡ä»¶

### æ‰‹åŠ¨éªŒè¯

æ¢å¤å®Œæˆåï¼Œå¯ä»¥æ‰‹åŠ¨æ£€æŸ¥ï¼š

```sql
-- æ£€æŸ¥ç®¡ç†å‘˜æ•°é‡
SELECT COUNT(*) FROM managers WHERE status = 1;

-- æ£€æŸ¥ä¸šåŠ¡è¡¨æ˜¯å¦ä¸ºç©º
SELECT COUNT(*) FROM users;
SELECT COUNT(*) FROM orders;
SELECT COUNT(*) FROM players;
```

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. MySQLé”™è¯¯æ—¥å¿—
3. Node.jsç‰ˆæœ¬å…¼å®¹æ€§
4. ç½‘ç»œè¿æ¥çŠ¶æ€

---

*æœ€åæ›´æ–°ï¼š2025å¹´1æœˆ*