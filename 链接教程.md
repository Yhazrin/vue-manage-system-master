## 项目基本信息

### 项目概述
这是一个**游戏陪玩平台管理系统**，包含前端React应用和后端Node.js API服务。

### 前端 (Frontend)
- **技术栈**: React 18 + TypeScript + Vite
- **UI框架**: Tailwind CSS
- **路由**: React Router DOM v7
- **状态管理**: React Context (AuthContext)
- **图表库**: Recharts
- **通知**: Sonner
- **表单**: React Hook Form + Zod
- **构建工具**: Vite
- **端口**: 3000 (开发环境)

**主要功能模块**:
- 用户管理 (用户、陪玩、管理员)
- 订单管理
- 游戏管理
- 礼物系统
- 提现管理
- 统计分析
- 通知系统
- 权限管理

### 后端 (Backend)
- **技术栈**: Node.js + Express + TypeScript
- **数据库**: MySQL 8.0
- **ORM**: mysql2 (原生SQL)
- **认证**: JWT + bcrypt
- **文件上传**: multer
- **跨域**: CORS
- **环境配置**: dotenv
- **开发工具**: ts-node-dev
- **端口**: 3000 (默认) 或环境变量 PORT

**数据库表结构**:
- `users` - 用户表
- `players` - 陪玩表
- `managers` - 管理员表
- `games` - 游戏表
- `orders` - 订单表
- `comments` - 评论表
- `gifts` - 礼物表
- `gift_records` - 礼物记录表
- `services` - 服务表
- `withdrawals` - 提现表
- `statistics` - 统计表

## 前后端连接方式

### 1. API配置
前端通过以下配置连接后端：

**前端API配置** (<mcfile name="api.ts" path="d:\项目文件\vue-manage-system-master\frontend\src\config\api.ts"></mcfile>):
```typescript
export const API_BASE_URL = process.env.NODE_ENV === 'development' 
  ? 'http://localhost:8080/api'  // 开发环境
  : '/api';                      // 生产环境
```

**前端服务配置** (<mcfile name="api.ts" path="d:\项目文件\vue-manage-system-master\frontend\src\services\api.ts"></mcfile>):
```typescript
const API_BASE_URL = import.meta.env.VITE_API_URL || 'https://api.example.com/api';
```

### 2. 环境变量配置

**后端环境变量** (<mcfile name=".env" path="d:\项目文件\vue-manage-system-master\backend\server\.env"></mcfile>):
```
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASS=123456
DB_NAME=author_center
JWT_SECRET=your_jwt_secret_key_here
```

### 3. 启动方式

**后端启动**:
```bash
cd backend/server
npm install
npm run dev  # 启动在端口3000
```

**前端启动**:
```bash
cd frontend
pnpm install
pnpm dev     # 启动在端口3000
```

### 4. 连接配置问题

⚠️ **当前配置存在端口冲突**:
- 前端配置期望后端在 `localhost:8080`
- 但后端实际运行在端口 `3000`

## 如何正确连接前后端

### 方案1: 修改后端端口 (推荐)
在后端 <mcfile name=".env" path="d:\项目文件\vue-manage-system-master\backend\server\.env"></mcfile> 文件中添加:
```
PORT=8080
```

### 方案2: 修改前端配置
修改前端 <mcfile name="api.ts" path="d:\项目文件\vue-manage-system-master\frontend\src\config\api.ts"></mcfile>:
```typescript
export const API_BASE_URL = process.env.NODE_ENV === 'development' 
  ? 'http://localhost:3000/api'  // 改为3000端口
  : '/api';
```

### 方案3: 使用环境变量
创建前端 `.env` 文件:
```
VITE_API_URL=http://localhost:3000/api
```

### 5. 数据库设置
1. 创建MySQL数据库 `author_center`
2. 执行初始化SQL: <mcfile name="init.sql" path="d:\项目文件\vue-manage-system-master\backend\sql\init.sql"></mcfile>
3. 配置数据库连接信息

### 6. 认证机制
- 使用JWT token进行身份验证
- Token存储在localStorage中
- 每个API请求自动添加Authorization头

这样配置后，前后端就能正常通信了。建议使用方案1，让后端运行在8080端口，这样与前端的默认配置保持一致。
        